<!DOCTYPE html>
<html class="has-navbar-fixed-top">
<head>
    <meta charset="utf-8">
<title>CSE168 Final Project Proposal - Dimension ZYt</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css">


<link href="/CSE168-Final-Project-Proposal/" rel="alternate" hreflang="zh-CN" />
    


<meta name="description" content="Don't Panic">





    <meta name="description" content="Rendering Equation $$L_r(x, \omega_o) &#x3D; L_e(x, \omega_o) +\int_{\Omega}f(x, \omega_i, \omega_o)L_i(x, \omega_i)(n \cdot \omega_i)\ d\omega_i$$">
<meta property="og:type" content="article">
<meta property="og:title" content="CSE168 Final Project Proposal">
<meta property="og:url" content="https://tonyzyt2000.github.io/en/CSE168-Final-Project-Proposal/index.html">
<meta property="og:site_name" content="奇葩空间">
<meta property="og:description" content="Rendering Equation $$L_r(x, \omega_o) &#x3D; L_e(x, \omega_o) +\int_{\Omega}f(x, \omega_i, \omega_o)L_i(x, \omega_i)(n \cdot \omega_i)\ d\omega_i$$">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/TonyZYT2000/ImageHost@master/cornellSphere.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/TonyZYT2000/ImageHost@master/cornellBunny.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/TonyZYT2000/ImageHost@master/ggxBunny.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/TonyZYT2000/ImageHost@master/cornellBunny5000.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/TonyZYT2000/ImageHost@master/cornellBunny500.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/TonyZYT2000/ImageHost@master/cornellSphereTrans256.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/TonyZYT2000/ImageHost@master/cornellSphereTrans.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/TonyZYT2000/ImageHost@master/cornellSphereTransNEE.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/TonyZYT2000/ImageHost@master/cornellSphereTrans.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/TonyZYT2000/ImageHost@master/cornellBunnyTransNEE.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/TonyZYT2000/ImageHost@master/cornellBunnyTrans.png">
<meta property="article:published_time" content="2021-05-27T03:47:25.000Z">
<meta property="article:modified_time" content="2021-11-03T23:45:01.190Z">
<meta property="article:author" content="究极大奇葩">
<meta property="article:tag" content="CSE168">
<meta property="article:tag" content="BRDF">
<meta property="article:tag" content="Rendering">
<meta property="article:tag" content="Ray Tracing">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/TonyZYT2000/ImageHost@master/cornellSphere.png">





<link rel="icon" href="/favicon.ico">


<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/css/justifiedGallery.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">


<link rel="stylesheet" href="/css/style.css">


<script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js"></script>


    
    
    
    
    
    
    
    
    
    

    


<meta name="generator" content="Hexo 5.0.0"></head>
<body>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="/en">
                
                    
                    <img src="https://cdn.jsdelivr.net/gh/TonyZYT2000/ImageHost@master/Logo.png" alt="" height="28">
                    
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item "
               href="/en/archives">Archives</a>
            
            <a class="navbar-item "
               href="/en/categories">Categories</a>
            
            <a class="navbar-item "
               href="/en/tags">Tags</a>
            
            <a class="navbar-item "
               href="/en/categories/Photography">Photography</a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
            <a class="navbar-item search" title="Search" href="javascript:;">
                <i class="fas fa-search"></i>
            </a>
            
            
            <div class="navbar-item is-hoverable has-dropdown is-hidden-mobile is-hidden-tablet-only toc">
                <a class="navbar-item" title="Table of Contents">
                    <i class="fa fa-list"></i>
                </a>
                <div class="navbar-dropdown is-right">
                    
                    
                    
                    
                    <a class="navbar-item" href="#Introduction">1&nbsp;&nbsp;<b>Introduction</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#Refactoring-the-Code">2&nbsp;&nbsp;<b>Refactoring the Code</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#Loading-Models">3&nbsp;&nbsp;<b>Loading Models</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#Simple-Glass-Material">4&nbsp;&nbsp;<b>Simple Glass Material</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#Final-Project-Proposal">5&nbsp;&nbsp;<b>Final Project Proposal</b></a>
                    
                </div>
            </div>
            
            
            <a class="navbar-item" title="GitHub" target="_blank" rel="noopener" href="https://github.com/TonyZYT2000">
                
                <i class="fab fa-github"></i>
                
            </a>
               
            
        </div>
    </div>
</nav>

    <section class="section">
    <div class="container">
    <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            CSE168 Final Project Proposal
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2021-05-27T03:47:25.000Z" itemprop="datePublished">May 26 2021</time>
            
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/en/categories/Computer-Science/">Computer Science</a><span>></span><a class="article-category-link" href="/en/categories/Computer-Science/Computer-Graphics/">Computer Graphics</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            5 minutes read (About 808 words)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <html><head></head><body><p>Rendering Equation</p>
<p>$$<br>L_r(x, \omega_o) = L_e(x, \omega_o) +<br>\int_{\Omega}f(x, \omega_i, \omega_o)L_i(x, \omega_i)(n \cdot \omega_i)\ d\omega_i<br>$$</p>
<a id="more"></a>

<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>For final project, I am going to implement algorithms related to transparent materials. In particular, I would like to create images with realistic refractions and caustic effects. Below, I will discuss what I have done so far, and what I plan to implement for this project.</p>
<h2 id="Refactoring-the-Code"><a href="#Refactoring-the-Code" class="headerlink" title="Refactoring the Code"></a>Refactoring the Code</h2><p>The first thing I did is refactoring the code. In submission of project 4, my <code>PathTracer.cu</code> almost reached 600 lines.  So, before writing any new code, I first adjusted the structure of my path tracer, and extract codes related to BRDF, PDF and importance sampling into a new header file <code>BSDF.h</code>. In the end, I reduced <code>PathTracer.cu</code> to around 300 lines, and new <code>BSDF.h</code> has a clear structure of functions evaluating and sampling each material.</p>
<h2 id="Loading-Models"><a href="#Loading-Models" class="headerlink" title="Loading Models"></a>Loading Models</h2><p>Previous projects support spheres and meshes made up of triangles. However, information of triangles need to be provided in the scene file in a unique way. To have a more flexible control of the scene, I implemented functions to load <code>.obj</code> files. This is achieved by a single command, and other components of the scene can be specified the old way. Now, I am able to compose new scenes with complex meshes easily.</p>
<figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#sphere 0 0 0 1</span><br><span class="line">obj Scenes/final/bunny.obj</span><br></pre></td></tr></tbody></table></figure>

<p>For example, with the minor change I show above, I can load the Stanford bunny into the scene:</p>
<table>
<thead>
<tr>
<th>Sphere</th>
<th>Bunny</th>
</tr>
</thead>
<tbody><tr>
<td><img src="https://cdn.jsdelivr.net/gh/TonyZYT2000/ImageHost@master/cornellSphere.png" alt="Sphere"></td>
<td><img src="https://cdn.jsdelivr.net/gh/TonyZYT2000/ImageHost@master/cornellBunny.png" alt="Bunny"></td>
</tr>
</tbody></table>
<p>With similar modifications, I also replaced spheres in GGX scene by Stanford bunny. This simple model loading command is compatible with all old material parameters, and position transformation commands. New models can also be sampled correctly by old importance sampling methods.</p>
<p><img src="https://cdn.jsdelivr.net/gh/TonyZYT2000/ImageHost@master/ggxBunny.png"></p>
<p>The library I used to load <code>.obj</code> files is <a target="_blank" rel="noopener" href="https://libigl.github.io/">libigl</a>. This powerful mesh processing library also provides interesting functions like model decimation:</p>
<table>
<thead>
<tr>
<th>Bunny with 5,000 Faces</th>
<th>Bunny with 500 Faces</th>
</tr>
</thead>
<tbody><tr>
<td><img src="https://cdn.jsdelivr.net/gh/TonyZYT2000/ImageHost@master/cornellBunny5000.png"></td>
<td><img src="https://cdn.jsdelivr.net/gh/TonyZYT2000/ImageHost@master/cornellBunny500.png"></td>
</tr>
</tbody></table>
<h2 id="Simple-Glass-Material"><a href="#Simple-Glass-Material" class="headerlink" title="Simple Glass Material"></a>Simple Glass Material</h2><p>Next, I implemented a simple glass material which only considers refractions and total inner reflections. New material can be specified by <code>brdf glass</code>.</p>
<p>The problem brought by this new material is that we can no longer do NEE when our sampling ray is blocked by the glass object. Because, after the sampling ray get refracted, it would no longer point to the region of the light source we initially sampled. One solution is to completely turn off NEE. But it requires a lot more samples for decent results.</p>
<table>
<thead>
<tr>
<th>256 Samples without NEE</th>
<th>2048 Samples without NEE</th>
</tr>
</thead>
<tbody><tr>
<td><img src="https://cdn.jsdelivr.net/gh/TonyZYT2000/ImageHost@master/cornellSphereTrans256.png" alt="256 Samples without NEE"></td>
<td><img src="https://cdn.jsdelivr.net/gh/TonyZYT2000/ImageHost@master/cornellSphereTrans.png" alt="2048 Samples without NEE"></td>
</tr>
</tbody></table>
<p>A trick I done is to only turn off NEE for a single ray if there is a glass object between the light source and the sampled region. This way, most regions are still rendered with NEE and noise free. Only the shadows and caustics under glass objects are noisy, but they are still correct. Although the result looks weird, it provides a quick way to debug, as it requires less samples.</p>
<table>
<thead>
<tr>
<th>256 Samples with Partial NEE</th>
<th>2048 Samples without NEE</th>
</tr>
</thead>
<tbody><tr>
<td><img src="https://cdn.jsdelivr.net/gh/TonyZYT2000/ImageHost@master/cornellSphereTransNEE.png" alt="256 Samples with Partial NEE"></td>
<td><img src="https://cdn.jsdelivr.net/gh/TonyZYT2000/ImageHost@master/cornellSphereTrans.png" alt="2048 Samples without NEE"></td>
</tr>
<tr>
<td><img src="https://cdn.jsdelivr.net/gh/TonyZYT2000/ImageHost@master/cornellBunnyTransNEE.png" alt="256 Samples with Partial NEE"></td>
<td><img src="https://cdn.jsdelivr.net/gh/TonyZYT2000/ImageHost@master/cornellBunnyTrans.png" alt="2048 Samples without NEE"></td>
</tr>
</tbody></table>
<h2 id="Final-Project-Proposal"><a href="#Final-Project-Proposal" class="headerlink" title="Final Project Proposal"></a>Final Project Proposal</h2><p>For the final project, the first thing I will implement is Fresnel effect for the glass material. This should be straightforward by generating a random number and check it against Schlick&#x2019;s approximation. With Fresnel effect, the glass objects will have reflections as well. This will provide more realistic appearance.</p>
<p>Next, I will implement photon mapping technique. Currently, caustic effects require huge number of samples. The partial NEE method can present clean surfaces with less samples, but the shadows and caustics are noisy and unnatural. With photon mapping, I hope to render realistic caustics and clean images within a small amount of time.</p>
<p>Lastly, I will model a larger scene with multiple light sources and more interesting glass objects, as well as GGX and Phong objects. Together, they will fully illustrate the beautiful and realist reflections, refractions and caustics rendered by my photon mapping path tracer. If time permits, I will also implement microfacet model for refractions, so glass object can have rough surfaces.</p>
</body></html>
    
    </div>
    
    <div class="columns is-variable is-1 is-multiline is-mobile">
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/en/tags/CSE168/">#CSE168</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/en/tags/BRDF/">#BRDF</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/en/tags/Rendering/">#Rendering</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/en/tags/Ray-Tracing/">#Ray Tracing</a></span>
    
    </div>
    
    
    <div class="columns is-mobile is-multiline article-nav">
        <span class="column is-12-mobile is-half-desktop  article-nav-prev">
            
            <a href="/en/CSE168-Final-Project/">CSE168 Final Project</a>
            
        </span>
        <span class="column is-12-mobile is-half-desktop  article-nav-next">
            
            <a href="/en/CSE168-Project2/">CSE168 Project 2</a>
            
        </span>
    </div>
    
</article>




    </div>
</section>
    <footer class="footer">
    <div class="container">
        <div class="columns content">
            <div class="column is-narrow has-text-centered">
                &copy; 2021 Yutong Zhang&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        target="_blank" rel="noopener" href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
            </div>
            <div class="column is-hidden-mobile"></div>

            
            
<div class="column is-narrow has-text-centered">
    <div class="dropdown is-up is-right is-hoverable" style="margin-top: -0.2em;">
        <div class="dropdown-trigger">
            <button class="button is-small" aria-haspopup="true" aria-controls="dropdown-menu7">
                <span class="icon">
                    <i class="fas fa-globe"></i>
                </span>
                <span>English</span>
                <span class="icon is-small">
            <i class="fas fa-angle-down" aria-hidden="true"></i>
          </span>
            </button>
        </div>
        <div class="dropdown-menu has-text-left" role="menu">
            <div class="dropdown-content">
            
                <a href="/CSE168-Final-Project-Proposal/" class="dropdown-item">
                    简体中文
                </a>
            
                <a href="/en/CSE168-Final-Project-Proposal/" class="dropdown-item">
                    English
                </a>
            
            </div>
        </div>
    </div>
</div>

        </div>
    </div>
</footer>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script>

<!-- test if the browser is outdated -->
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script>
<script>
    $(document).ready(function () {
        // plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })
    });
</script>

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
    moment.locale("en-AU");
</script>


    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script>
    MathJax.Hub.Config({
        "HTML-CSS": {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
</script>

    
    
    
    
<script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/js/jquery.justifiedGallery.min.js"></script>
<script>
    (function ($) {
        $(document).ready(function () {
            if (typeof($.fn.lightGallery) === 'function') {
                $('.article.gallery').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof($.fn.justifiedGallery) === 'function') {
                $('.justified-gallery').justifiedGallery();
            }
        });
    })(jQuery);
</script>

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <style>
        .hljs {
            position: relative;
        }

        .hljs .clipboard-btn {
            float: right;
            color: #9a9a9a;
            background: none;
            border: none;
            cursor: pointer;
        }

        .hljs .clipboard-btn:hover {
          color: #8a8a8a;
        }

        .hljs > .clipboard-btn {
            display: none;
            position: absolute;
            right: 4px;
            top: 4px;
        }

        .hljs:hover > .clipboard-btn {
            display: inline;
        }

        .hljs > figcaption > .clipboard-btn {
            margin-right: 4px;
        }
    </style>
    <script>
      $(document).ready(function () {
        $('figure.hljs').each(function(i, figure) {
          var codeId = 'code-' + i;
          var code = figure.querySelector('.code');
          var copyButton = $('<button>Copy <i class="far fa-clipboard"></i></button>');
          code.id = codeId;
          copyButton.addClass('clipboard-btn');
          copyButton.attr('data-clipboard-target-id', codeId);

          var figcaption = figure.querySelector('figcaption');

          if (figcaption) {
            figcaption.append(copyButton[0]);
          } else {
            figure.prepend(copyButton[0]);
          }
        })

        var clipboard = new ClipboardJS('.clipboard-btn', {
          target: function(trigger) {
            return document.getElementById(trigger.getAttribute('data-clipboard-target-id'));
          }
        });
        clipboard.on('success', function(e) {
          e.clearSelection();
        })
      })
    </script>

    
    

    



<script src="/js/script.js"></script>


    
    <div class="searchbox ins-search">
    <div class="searchbox-mask"></div>
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.en.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>

<script src="/js/insight.js"></script>

    
</body>
</html>